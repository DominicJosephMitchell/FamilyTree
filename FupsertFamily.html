<!DOCTYPE html>
<html lang="en">

<head>
    <title>MyFamilyTreeUpsert</title>
    <link rel="stylesheet" href="Freset.css">
    <link rel="stylesheet" href="Fstyles.css">
    <!-- <link rel="stylesheet" href="sign-up.css"> -->
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous"> -->
    <script src="template.js" type="text/javascript"></script>
</head>

<body>
    <aside>
        <header>
            <iframe src="Fheader.html" height="25%" width="100%" scrolling="no"></iframe>
        </header>
    </aside>
    <div class="content">
        <h2 class="title">Family Members</h2>

        <!-- <div>
            <style>
                img {
                        display: block;
                        margin-left: auto;
                        margin-right: auto;
                        margin-top: auto;
                        margin-bottom: 7.9%;
                    }
                </style>
            <img src="imgF/img_oceantree.png" alt="img_oceantree.png">
        </div> -->
        <form id="upsertStoryForm">
            <!-- Title -->
            <h5>
                <!-- Text -->
                <div>
                    <label for="text">Name</label>
                    <input id="name" type="text" placeholder="Enter Full Name" />
                </div>
                <!-- Address 1 -->
                <div>
                    <label for="address1">Realtionship</label>
                    <input id="address1" type="text" placeholder="Enter Realtionship" />
                </div>
                <!-- Date of Birth -->
                <div>
                    <label for="dateOfBirth">Date of Birth</label>
                    <input id="dateOfBirth" type="dateofbirth" placeholder="Enter Date of Birth" />
                </div>
                <!-- Address 2 -->
                <div>
                    <label for="address">Address</label>
                    <input id="address" type="text" placeholder="Enter Address" />
                </div>
                <!-- City -->
                <div>
                    <label for="city">City</label>
                    <input id="city" type="text" placeholder="Enter City" />
                </div>
                <!-- State -->
                <div>
                    <label for="state">State</label>
                    <input id="state" type="text" placeholder="Enter State" />
                </div>
                <!-- Zip -->
                <div>
                    <label for="zip">Zip</label>
                    <input id="zip" type="text" placeholder="Enter Zip" />
                </div>
                <!-- Country -->
                <div>
                    <label for="country">Country</label>
                    <input id="country" type="text" placeholder="Enter Country" />
                </div>

                <div class="buttons">
                    <input id="saveButton" class="button" type="submit" value="Save" />
                </div>
            </h5>
        </form>
    </div>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <footer>
        <iframe class="footer" src="Ffooter.html" height="40" width="100%" scrolling="no"></iframe>
    </footer>

    <script>
        document.getElementById("upsertStoryForm").addEventListener("submit", function (e) {
            if (e.preventDefault) { e.preventDefault(); }

            upsertStoryForm();
        });

        var upsertStoryForm = function () {
            const story = {
                title: document.forms["upsertStoryForm"]["title"].value,
                text: document.forms["upsertStoryForm"]["text"].value,
                // lat: document.forms["upsertStoryForm"]["lat"].value,
                // long: document.forms["upsertStoryForm"]["long"].value,
                address1: document.forms["upsertStoryForm"]["address1"].value,
                address2: document.forms["upsertStoryForm"]["address2"].value,
                city: document.forms["upsertStoryForm"]["city"].value,
                state: document.forms["upsertStoryForm"]["state"].value,
                zip: document.forms["upsertStoryForm"]["zip"].value,
                country: document.forms["upsertStoryForm"]["country"].value,
                dateTime: document.forms["upsertStoryForm"]["dateTime"].value,
                createdBY: window.sessionsStorage.loggedIn
            };

            console.log(JSON.stringify(story));

            let stories = window.localStorage.stories ? JSON.parse(window.localStorage.stories) : [];

            if (stories.length == 0) {
                story.id = 1;
            } else {
                story.id = stories.length + 1;
            }
            stories.push(story);
            windows.localStorage.stories = JSON.stringify(stories);
            windows.location.href = "/FamilyTree/FstoryDetails.html/?id=" + story.id;

            return false;
        }
    </script>
</body>

</html>